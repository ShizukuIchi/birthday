{"version":3,"sources":["src/main.js"],"names":["isButtonsOn","buttonListener","setMain","main","document","querySelector","style","display","innerHTML","html","buttons","start","buttonClickHandler","setHint","e","id","target","closest","bulbs","querySelectorAll","forEach","on","index","opacity","setLight","room","filter","length","capoo","stop","onclick","alert","hintStyler","track","from","to","duration","window","innerWidth","set"],"mappings":"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","file":"main.1e43358e.map","sourceRoot":"..","sourcesContent":["import html from '../main.html';\nimport { listen, timeline, styler } from 'popmotion';\n\nlet isButtonsOn = [false, false, false, false, false];\nlet buttonListener;\n\nexport const setMain = () => {\n  const main = document.querySelector('.main-scene');\n  main.style.display = 'flex';\n  main.innerHTML = html;\n  const buttons = document.querySelector('.buttons');\n  buttonListener = listen(buttons, 'click').start(buttonClickHandler);\n  setHint();\n};\n\nfunction buttonClickHandler(e) {\n  let id;\n  try {\n    id = e.target.closest('.button').id;\n  } catch {\n    return;\n  }\n  switch (id) {\n    case 'button1':\n      isButtonsOn[1] = !isButtonsOn[1];\n      isButtonsOn[2] = !isButtonsOn[2];\n      break;\n    case 'button2':\n      isButtonsOn[1] = !isButtonsOn[1];\n      isButtonsOn[4] = !isButtonsOn[4];\n      break;\n    case 'button3':\n      isButtonsOn[0] = !isButtonsOn[0];\n      isButtonsOn[2] = !isButtonsOn[2];\n      isButtonsOn[4] = !isButtonsOn[4];\n      break;\n    case 'button4':\n      isButtonsOn[1] = !isButtonsOn[1];\n      isButtonsOn[3] = !isButtonsOn[3];\n      isButtonsOn[4] = !isButtonsOn[4];\n      break;\n    case 'button5':\n      isButtonsOn[0] = !isButtonsOn[0];\n      isButtonsOn[4] = !isButtonsOn[4];\n      isButtonsOn[3] = !isButtonsOn[3];\n      break;\n    default:\n      return;\n  }\n  const bulbs = document.querySelectorAll('.bulb');\n  isButtonsOn.forEach((on, index) => {\n    bulbs[index].style.opacity = on ? 1 : 0.1;\n  });\n  setLight();\n}\n\nfunction setLight() {\n  const room = document.querySelector('.test');\n  switch (isButtonsOn.filter(on => on).length) {\n    case 5:\n      room.style['-webkit-mask-image'] =\n        'radial-gradient(circle at 50% 10%, rgba(0,0,0,0.0) 0%, rgba(0,0,0,1) 100%)';\n      const capoo = document.querySelector('.capoo');\n      capoo.style['pointer-events'] = 'all';\n      buttonListener.stop();\n      capoo.querySelector('img').onclick = () =>\n        alert('恭喜你成功惹，請用截圖換獎品XD');\n      break;\n    case 4:\n      room.style['-webkit-mask-image'] =\n        'radial-gradient(circle at 50% 10%, rgba(0,0,0,0.64) 0%, rgba(0,0,0,1) 36%)';\n      break;\n    case 3:\n      room.style['-webkit-mask-image'] =\n        'radial-gradient(circle at 50% 10%, rgba(0,0,0,0.72) 0%, rgba(0,0,0,1) 28%)';\n      break;\n    case 2:\n      room.style['-webkit-mask-image'] =\n        'radial-gradient(circle at 50% 10%, rgba(0,0,0,0.8) 0%, rgba(0,0,0,1) 20%)';\n      break;\n    case 1:\n      room.style['-webkit-mask-image'] =\n        'radial-gradient(circle at 50% 10%, rgba(0,0,0,0.88) 0%, rgba(0,0,0,1) 12%)';\n      break;\n    default:\n      room.style['-webkit-mask-image'] =\n        'radial-gradient(circle at 50% 10%, rgba(0,0,0,0.95) 0%, rgba(0,0,0,1) 5%)';\n  }\n}\n\nfunction setHint() {\n  const hintStyler = styler(document.querySelector('.hint'));\n  timeline([\n    '600',\n    [\n      {\n        track: 'skewX',\n        from: '0deg',\n        to: '-20deg',\n        duration: 100,\n      },\n      {\n        track: 'x',\n        from: 0,\n        to: -window.innerWidth,\n        duration: 2000,\n      },\n    ],\n    '-300',\n    {\n      track: 'skewX',\n      from: '-20deg',\n      to: '10deg',\n      duration: 200,\n    },\n    {\n      track: 'skewX',\n      from: '10deg',\n      to: '0deg',\n      duration: 100,\n    },\n    '500',\n    [\n      {\n        track: 'skewX',\n        from: '0deg',\n        to: '-20deg',\n        duration: 500,\n      },\n      {\n        track: 'x',\n        from: -window.innerWidth,\n        to: -window.innerWidth * 2,\n        duration: 2000,\n      },\n    ],\n  ]).start(hintStyler.set);\n}\n"]}