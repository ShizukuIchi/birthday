{"version":3,"sources":["src/main.js"],"names":["buttonListener","isButtonsOn","setMain","main","document","querySelector","style","display","innerHTML","html","buttons","start","buttonClickHandler","setHint","e","id","target","closest","bulbs","querySelectorAll","forEach","on","index","opacity","setLight","room","filter","length","capoo","stop","onclick","alert","hintStyler","track","from","to","duration","window","innerWidth","set"],"mappings":";AAyIC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAzID,IAAA,EAAA,EAAA,QAAA,iBACA,EAAA,QAAA,aAwIC,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAtID,IACIA,EADAC,EAAc,EAAC,GAAO,GAAO,GAAO,GAAO,GAGlCC,EAAU,WACfC,IAAAA,EAAOC,SAASC,cAAc,eACpCF,EAAKG,MAAMC,QAAU,OACrBJ,EAAKK,UAAYC,EAAjB,QACMC,IAAAA,EAAUN,SAASC,cAAc,YACvCL,GAAiB,EAAOU,EAAAA,QAAAA,EAAS,SAASC,MAAMC,GAChDC,KAGF,SAASD,EAAmBE,GACtBC,IAAAA,EACA,IACFA,EAAKD,EAAEE,OAAOC,QAAQ,WAAWF,GACjC,MAAM,GACN,OAEMA,OAAAA,GACD,IAAA,UACHd,EAAY,IAAMA,EAAY,GAC9BA,EAAY,IAAMA,EAAY,GAC9B,MACG,IAAA,UACHA,EAAY,IAAMA,EAAY,GAC9BA,EAAY,IAAMA,EAAY,GAC9B,MACG,IAAA,UACHA,EAAY,IAAMA,EAAY,GAC9BA,EAAY,IAAMA,EAAY,GAC9BA,EAAY,IAAMA,EAAY,GAC9B,MACG,IAAA,UACHA,EAAY,IAAMA,EAAY,GAC9BA,EAAY,IAAMA,EAAY,GAC9BA,EAAY,IAAMA,EAAY,GAC9B,MACG,IAAA,UACHA,EAAY,IAAMA,EAAY,GAC9BA,EAAY,IAAMA,EAAY,GAC9BA,EAAY,IAAMA,EAAY,GAC9B,MACF,QACE,OAEEiB,IAAAA,EAAQd,SAASe,iBAAiB,SACxClB,EAAYmB,QAAQ,SAACC,EAAIC,GACvBJ,EAAMI,GAAOhB,MAAMiB,QAAUF,EAAK,EAAI,KAExCG,IAGF,SAASA,IACDC,IAAAA,EAAOrB,SAASC,cAAc,SAC5BJ,OAAAA,EAAYyB,OAAO,SAAAL,GAAMA,OAAAA,IAAIM,QAC9B,KAAA,EACHF,EAAKnB,MAAM,sBACT,6EACIsB,IAAAA,EAAQxB,SAASC,cAAc,UACrCuB,EAAMtB,MAAM,kBAAoB,MAChCN,EAAe6B,OACfD,EAAMvB,cAAc,OAAOyB,QAAU,WACnCC,OAAAA,MAAM,qBACR,MACG,KAAA,EACHN,EAAKnB,MAAM,sBACT,6EACF,MACG,KAAA,EACHmB,EAAKnB,MAAM,sBACT,6EACF,MACG,KAAA,EACHmB,EAAKnB,MAAM,sBACT,4EACF,MACG,KAAA,EACHmB,EAAKnB,MAAM,sBACT,6EACF,MACF,QACEmB,EAAKnB,MAAM,sBACT,6EAIR,SAASO,IACDmB,IAAAA,GAAa,EAAO5B,EAAAA,QAAAA,SAASC,cAAc,WACxC,EAAA,EAAA,UAAA,CACP,MACA,CACE,CACE4B,MAAO,QACPC,KAAM,OACNC,GAAI,SACJC,SAAU,KAEZ,CACEH,MAAO,IACPC,KAAM,EACNC,IAAKE,OAAOC,WACZF,SAAU,MAGd,OACA,CACEH,MAAO,QACPC,KAAM,SACNC,GAAI,QACJC,SAAU,KAEZ,CACEH,MAAO,QACPC,KAAM,QACNC,GAAI,OACJC,SAAU,KAEZ,MACA,CACE,CACEH,MAAO,QACPC,KAAM,OACNC,GAAI,SACJC,SAAU,KAEZ,CACEH,MAAO,IACPC,MAAOG,OAAOC,WACdH,GAAyB,GAApBE,OAAOC,WACZF,SAAU,QAGbzB,MAAMqB,EAAWO,KACrB,QAAA,QAAA","file":"main.1e6bce08.map","sourceRoot":"..","sourcesContent":["import html from '../main.html';\nimport { listen, timeline, styler } from 'popmotion';\n\nlet isButtonsOn = [false, false, false, false, false];\nlet buttonListener;\n\nexport const setMain = () => {\n  const main = document.querySelector('.main-scene');\n  main.style.display = 'flex';\n  main.innerHTML = html;\n  const buttons = document.querySelector('.buttons');\n  buttonListener = listen(buttons, 'click').start(buttonClickHandler);\n  setHint();\n};\n\nfunction buttonClickHandler(e) {\n  let id;\n  try {\n    id = e.target.closest('.button').id;\n  } catch {\n    return;\n  }\n  switch (id) {\n    case 'button1':\n      isButtonsOn[1] = !isButtonsOn[1];\n      isButtonsOn[2] = !isButtonsOn[2];\n      break;\n    case 'button2':\n      isButtonsOn[1] = !isButtonsOn[1];\n      isButtonsOn[4] = !isButtonsOn[4];\n      break;\n    case 'button3':\n      isButtonsOn[0] = !isButtonsOn[0];\n      isButtonsOn[2] = !isButtonsOn[2];\n      isButtonsOn[4] = !isButtonsOn[4];\n      break;\n    case 'button4':\n      isButtonsOn[1] = !isButtonsOn[1];\n      isButtonsOn[3] = !isButtonsOn[3];\n      isButtonsOn[4] = !isButtonsOn[4];\n      break;\n    case 'button5':\n      isButtonsOn[0] = !isButtonsOn[0];\n      isButtonsOn[4] = !isButtonsOn[4];\n      isButtonsOn[3] = !isButtonsOn[3];\n      break;\n    default:\n      return;\n  }\n  const bulbs = document.querySelectorAll('.bulb');\n  isButtonsOn.forEach((on, index) => {\n    bulbs[index].style.opacity = on ? 1 : 0.1;\n  });\n  setLight();\n}\n\nfunction setLight() {\n  const room = document.querySelector('.test');\n  switch (isButtonsOn.filter(on => on).length) {\n    case 5:\n      room.style['-webkit-mask-image'] =\n        'radial-gradient(circle at 50% 10%, rgba(0,0,0,0.0) 0%, rgba(0,0,0,1) 100%)';\n      const capoo = document.querySelector('.capoo');\n      capoo.style['pointer-events'] = 'all';\n      buttonListener.stop();\n      capoo.querySelector('img').onclick = () =>\n        alert('恭喜你成功惹，請用截圖換獎品XD');\n      break;\n    case 4:\n      room.style['-webkit-mask-image'] =\n        'radial-gradient(circle at 50% 10%, rgba(0,0,0,0.64) 0%, rgba(0,0,0,1) 36%)';\n      break;\n    case 3:\n      room.style['-webkit-mask-image'] =\n        'radial-gradient(circle at 50% 10%, rgba(0,0,0,0.72) 0%, rgba(0,0,0,1) 28%)';\n      break;\n    case 2:\n      room.style['-webkit-mask-image'] =\n        'radial-gradient(circle at 50% 10%, rgba(0,0,0,0.8) 0%, rgba(0,0,0,1) 20%)';\n      break;\n    case 1:\n      room.style['-webkit-mask-image'] =\n        'radial-gradient(circle at 50% 10%, rgba(0,0,0,0.88) 0%, rgba(0,0,0,1) 12%)';\n      break;\n    default:\n      room.style['-webkit-mask-image'] =\n        'radial-gradient(circle at 50% 10%, rgba(0,0,0,0.95) 0%, rgba(0,0,0,1) 5%)';\n  }\n}\n\nfunction setHint() {\n  const hintStyler = styler(document.querySelector('.hint'));\n  timeline([\n    '600',\n    [\n      {\n        track: 'skewX',\n        from: '0deg',\n        to: '-20deg',\n        duration: 100,\n      },\n      {\n        track: 'x',\n        from: 0,\n        to: -window.innerWidth,\n        duration: 2000,\n      },\n    ],\n    '-300',\n    {\n      track: 'skewX',\n      from: '-20deg',\n      to: '10deg',\n      duration: 200,\n    },\n    {\n      track: 'skewX',\n      from: '10deg',\n      to: '0deg',\n      duration: 100,\n    },\n    '500',\n    [\n      {\n        track: 'skewX',\n        from: '0deg',\n        to: '-20deg',\n        duration: 500,\n      },\n      {\n        track: 'x',\n        from: -window.innerWidth,\n        to: -window.innerWidth * 2,\n        duration: 2000,\n      },\n    ],\n  ]).start(hintStyler.set);\n}\n"]}